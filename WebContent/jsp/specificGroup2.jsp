<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
    <%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
    
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--[if IE 8]> <html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en">
<!--<![endif]-->
<!-- BEGIN HEAD -->

<head>
    <meta charset="utf-8" />
    <title>Metronic | The Ultimate Multi-purpose Bootstrap Admin Dashboard Theme | Theme #3 | Bootstrap Switch</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <meta content="#1 selling multi-purpose bootstrap admin theme sold in themeforest marketplace packed with angularjs, material design, rtl support with over thausands of templates and ui elements and plugins to power any type of web applications including saas and admin dashboards. Preview page of Theme #3 for bootstrap switch"
        name="description" />
    <meta content="" name="author" />
    <!-- BEGIN GLOBAL MANDATORY STYLES -->

    <link href="../assets/global/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <link href="../assets/global/plugins/simple-line-icons/simple-line-icons.min.css" rel="stylesheet" type="text/css" />
    <link href="../assets/global/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="../assets/global/plugins/bootstrap-switch/css/bootstrap-switch.min.css" rel="stylesheet" type="text/css" />
    <!-- END GLOBAL MANDATORY STYLES -->
    <!-- BEGIN THEME GLOBAL STYLES -->
    <link href="../assets/global/css/components.min.css" rel="stylesheet" id="style_components" type="text/css" />
    <link href="../assets/global/css/plugins.min.css" rel="stylesheet" type="text/css" />
    <!-- END THEME GLOBAL STYLES -->
    <!-- BEGIN THEME LAYOUT STYLES -->
    <link href="../assets/layouts/layout3/css/layout.min.css" rel="stylesheet" type="text/css" />
    <link href="../assets/layouts/layout3/css/themes/default.min.css" rel="stylesheet" type="text/css" id="style_color" />
    <link href="../assets/layouts/layout3/css/custom.min.css" rel="stylesheet" type="text/css" />
    <!-- END THEME LAYOUT STYLES -->
    <link rel="shortcut icon" href="favicon.ico" /> </head>
<style>
    #center {
        height: 200px;
        width: 73%;
        margin: auto;
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
    }

    .invite {
        position: absolute;
        right: 15px;
        bottom: 25px;
    }

    .publication large with-abstract {}

    .publications-list .publication {
        margin-bottom: 1rem;
        padding-bottom: 1rem;
    }



    .card {

        background: #fff;
        color: #474747;
        margin-bottom: 8px;
        padding: 1rem;
        width: 100%;
    }

    .authors {
        display: block;
        list-style-type: none;
        margin: 0 0 1.5rem 0;
        padding: 0;
        -webkit-margin-before: 1em;
        -webkit-margin-after: 1em;
        -webkit-margin-start: 0px;
        -webkit-margin-end: 0px;
        -webkit-padding-start: 40px;
    }

    .authors li {
        margin: 0 0 0 10px;
        padding: 0;
        display: inline-block;
    }

    .publication .authors,
    .publication .authors-expanded,
    .publication .publisher {
        font-family: NexusSans, Arial, sans-serif;
        font-size: 1.4rem;
        line-height: 1.5;
        font-style: normal;
    }

    .publication.with-abstract .publication-abstract {
        font-family: NexusSans, Arial, sans-serif;
        font-size: 1.4rem;
        line-height: 1.5;
        font-style: normal;
        margin-bottom: 1rem;
        margin-top: 1rem;
    }

    a.basic-link {
        padding-top: 1rem;
    }

    .basic-link {
        font-family: NexusSans, Arial, sans-serif;
        font-size: 1.8rem;
        line-height: 1.5;
        font-weight: 400;
        font-style: normal;
        transition: 111ms ease-out;
        transition-property: color;
        -webkit-font-smoothing: antialiased;
        background: 0 0;
        border: none;
        color: #007398;
        cursor: pointer;
        display: inline-block;
        height: 2rem;
        line-height: 0;
        margin: 0;
        outline: 0;
        padding: 0;
        text-decoration: none;
        vertical-align: middle;
        white-space: nowrap;
    }

    .publication.large h3 {
        font-family: NexusSans, Arial, sans-serif;
        font-size: 1.75rem;
        line-height: 1.5;
        font-weight: 700;
        font-style: normal;
    }

    .card community-list-container {
        height: 100%;
        min-height: 300px;
        width: 1130px;
        background-color: white;
    }

    .page-content {
        min-height: 1000px;
        height: 100%;
    }

    #document_header {
        font-size: 16px;
    }
    
    .state-container {
        position: absolute;
        right: 120px;
        bottom: 2px;
    }

    .community-detail {
        margin-left: 30px;
    }
    
    .community {
        display: inline-block;
    }
</style>
<!-- END HEAD -->

<body class="page-container-bg-solid">
    <div class="page-wrapper">
        <div class="page-wrapper-row">
            <div class="page-wrapper-top">
                <!-- BEGIN HEADER -->
                <div class="page-header" style="height: 63px;">
                    <!-- BEGIN HEADER TOP -->
                    <div class="page-header-top">
                        <div class="container">

                            <div class="page-logo" style="margin-left: -140px;">
                                <a href="#">
                                        <img src="csuLogo (2).png" alt="logo" class="logo-default" style="margin-top:9px; ">
                                    </a>
                            </div>

                            <a href="javascript:;" class="menu-toggler"></a>
                            <div class="top-menu">
                                <ul class="nav navbar-nav" style="font-size: 17px;">
                                    <li>
                                        <a href="../personal/personalLibrary"> Library
                                </a>
                                    </li>
                                    <li>
                                        <a href="showGroup"> Group
                                </a>
                                    </li>
                                    <li>
                                        <a href="../public/publicLibrary"> Public
                                </a>
                                    </li>
                                    <li>
                                        <a href="javascript:;"> PaperAssit
                                </a>
                                    </li>
                                </ul>
                                <ul class="nav navbar-nav pull-right" style="margin-left: 180px;">
                                    <li style="margin-top: 9px;margin-left: -20px;">
                                        <!--查询-->
                                        <form class="search-form" action="searchArticles?groupId=${groupId}" method="POST">
                                            <div class="input-group">
                                                <input type="text" class="form-control" placeholder="Search" name="keywords" style="width:200px">
                                                <input type="submit" value="Go" class="btn btn-primary">
                                                <!--<input name="groupId" value="${groupId}" style="display:none" type="text">
                                                  <span class="input-group-btn">                                                
                                            		<a href="javascript:;" class="btn submit">
                                                	<i class="icon-magnifier"></i>
                                            		</a>
                                        		</span>
                                        		-->
                                            </div>
                                        </form>
                                    </li>

                                    <!-- BEGIN USER LOGIN DROPDOWN -->
                                    <li class="dropdown dropdown-user dropdown-dark">
                                        <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true">
                                            <!--<img alt="" class="img-circle" src="../assets/layouts/layout3/img/avatar9.jpg">-->
                                            <span class="glyphicon glyphicon-user"></span> <span class="username username-hide-mobile">User</span>
                                        </a>
                                        <ul class="dropdown-menu dropdown-menu-default">
                                            <!--  <li>
                                                <a href="">
                                                        <i class="icon-user"></i> My Profile </a>
                                            </li>-->
                                            <li>
                                                <a href="../login">
                                                        <i class="icon-calendar"></i> login out </a>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- END HEADER TOP -->
                    <!-- BEGIN HEADER MENU -->
                    <div class="row">
                        <div class="col-md-12" style="background-color: cadetblue  ;height:270px">
                            <!--<div class="row">-->
                            <div class="col-xs-12" id="center" style="background-color: white; ">
                                <div>
                                    <b style="font-size: 30px;margin-top:20px;">${groupName}</b>
                                    <!--<br>--><input type="button" value="${groupId}" id="getGroupId" style="display:none">
                                    <p>computer science
                                        <p>
                                            <div>
                                                <button class="invite btn-primary" data-toggle="modal" data-target="#invitemember" id="inviteMemberButton">Invite members</button>
                                            </div>
                                </div>
                            </div>
                            <!--</div>-->
                        </div>
                    </div>
                    <!-- END HEADER MENU -->
                </div>
                <!-- END HEADER -->
            </div>
        </div>
        <div class="page-wrapper-row full-height">
            <div class="page-wrapper-middle">
                <!-- BEGIN CONTAINER -->
                <div class="page-container">
                    <!-- BEGIN CONTENT -->
                    <div class="page-content-wrapper">
                        <!-- BEGIN CONTENT BODY -->
                        <!-- BEGIN PAGE CONTENT BODY -->
                        <div class="page-content" style="margin-top:0px;">
                            <div class="container">
                                <!-- BEGIN PAGE BREADCRUMBS -->
                                <!-- END PAGE BREADCRUMBS -->
                                <!-- BEGIN PAGE CONTENT INNER -->
                                <div class="page-content-inner">
                                    <div class="row">
                                        <div class="col-md-12" id="search">
                                            <div class="tabs">
                                                <ul class="nav nav-tabs" style="border-bottom:0px;">
                                                    <li>
                                                        <a href="#paper" data-toggle="tab"> Documents</a>
                                                    </li>
                                                    <li>
                                                        <a href="#people" data-toggle="tab"> Members</a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                   
                                        <!--end of row-->

                                        <div class="row">
                                            <div class="col-md-12">
                                                <!-- BEGIN PORTLET-->
                                                <div class="portlet light form-fit ">

                                                    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                                                        <div class="modal-dialog modal-lg" role="document">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                                                    <h4 class="modal-title">请选择文件上传</h4>
                                                                </div>
                                                                <div class="modal-body">
                                                                    <form id="uploadfiles" method="post" enctype="multipart/form-data" action="uploadBatchSubmit?groupId=${groupId}">

                                                                        <input type="file" multiple="multiple" name="file_upload"/>
                                                                        <br/>
                                                                        <input type="submit" class="btn btn-success" value="上传" id="uploadButton"/>
                                                                        <input type="button" class="btn btn-default" value="取消" data-dismiss="modal" />
                                                                    </form>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="portlet-body form" style="height:300px;">
                                                        <!-- BEGIN FORM-->
                                                        <div class="tab-content">
                                                            <div class="tab-pane fade in active" id="paper">
                                                                <div class="card community-list-container">

                                                                    <div id="document_header">
                                                                        <h3>Documents (<span id="total_articles"></span>)

                                                                            <span id="add-document-button">
                                                                        <button
                                                                         class="add-document basic-link glyphicon glyphicon-plus" data-toggle="modal" data-target="#myModal">
                                                                        Add
                                                                        </button>
                                                                    </span>
                                                                        </h3>
                                                                    </div>
                                                                    <!--document 添加-->

                                                                    <!--list1-->

                                                                    <div id="showArticleFeild">
                                                                	<c:forEach items="${articles}" var="result" varStatus="status">
                                                                		<form id="form${result.articleId}">
                                                                   		 	<div class="publications-list">
                                                                       		 	<div class="publication large with-abstract" id="XX">
                                                                            		<div class="publication-details">
                                                                                		<section>
                                                                                    		<h3>${result.title}</h3>
                                                                                    	<ul class="authors">
                                                                                        	<li>${result.author}</li>
                                                                                    	</ul>
                                                                                    	<div class="publisher">${result.address}</div>
                                                                                    	<div class="publication-abstract">${result.abstracts}<span class="" style="visibility: visible;">... </span></div>
                                                                                    	<div>
                                                                                    		<!-- ><input type="button" class="btn btn-primary btn-xs" value="download" id="${result.articleId}">-->
                                                                                    		<a class="btn btn-primary btn-xs" href="downloadFile?articleId=${result.articleId}">download</a>&nbsp &nbsp &nbsp &nbsp
                                                                                    		<button type="button" class="btn btn-primary btn-xs" id="${result.articleId}">delete</button>
                                                                                    	</div>
                                                                                		</section>
                                                                            		</div>
                                                                        	 	</div>
                                                                    	 	</div>
                                                                    	 </form>
                                                                	 </c:forEach>
                                                                	 </div>
                                                                	 
                                                                </div>
                                                            </div>  
                                                            

                                                            <div id="people" style="min-height:400px;" class="tab-pane fade">
                                                            	<div id="showAdmins">
                                                            		<c:forEach items="${admins}" var="result" varStatus="status">                                                          	
																		<div class="community col-md-6">
																			<div class="community-detail">
																				<h3>${result.userName}</h3>
																				<p>administer</p>
																			</div>
																			<div class="state-container">
																				<a href="deleteAdminsubmit?userId=${result.userId}&groupId=${groupId}">delete administer</a>
																			</div>
																		</div>	
																	</c:forEach>
																</div>
															
																<div id="showUsers">																	
																	<c:forEach items="${users}" var="result" varStatus="status">
																		<div class="community col-md-6">
																			<div class="community-detail">
																				<h3>${result.userName}</h3>
																				<p>user</p>
																			</div>
																			<div class="state-container">
																				<a href="deleteUserSubmit?userId=${result.userId}&groupId=${groupId}">delete user</a>
																			</div>
																		</div>	
																	</c:forEach>
																</div>																																																																
                                                            </div>



                                                        </div>
                                                        <div id="invitemember" class="modal fade" role="dialog" aria-hidden="true">
                                                            <div class="modal-dialog">
                                                                <div class="modal-content">
                                                                    <div class="modal-header">
                                                                        <a href="javascript:;" class="close" data-dismiss="modal" aria-hidden="true"></a>
                                                                        <h4 class="modal-title">Invite members</h4>
                                                                    </div>
                                                                    <div class="modal-body">
                                                                        <form action="addUser" class="form-horizontal">
                                                                            <div class="form-group">
                                                                                <label class="control-label col-md-3">Enter UserId </label>
                                                                                <div class="col-md-9">
                                                                                   <input class="form-control placeholder-no-fix" type="text" placeholder="email" name="userId" id="inviteUserId"/>  
                                                                               </div>
                                                                            </div>
                                                                           
                                                                            
                                                                        </form>
                                                                    </div>
                                                                    <div class="modal-footer">
                                                                        <a href="javascript:;" class="btn grey-salsa btn-outline" data-dismiss="modal">Close</a>
                                                                        <button id="inviteSubmit" value="" class="btn green" >invite</button>
                                                                            
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <!-- END FORM-->
                                                    </div>
                                                </div>
                                                <!-- END PORTLET-->
                                            </div>
                                        </div>
                                    </div>
                                    <!-- END PAGE CONTENT INNER -->
                                </div>
                            </div>
                            <!-- END PAGE CONTENT BODY -->
                            <!-- END CONTENT BODY -->
                        </div>
                        <!-- END CONTENT -->

                    </div>
                    <!-- END CONTAINER -->
                </div>
            </div>
            <!--<div class="page-wrapper-row" style="position: relative">
                <div class="page-wrapper-bottom">
                   
                    <div class="page-footer">
                        <div class="container"> 2017 CSU
                            <a target="_blank" href=""></a> &nbsp;|&nbsp;
                            <a href="" title="Purchase Metronic just for 27$ and get lifetime updates for free" target="_blank"></a>
                        </div>
                    </div>
                    <div class="scroll-to-top">
                        <i class="icon-arrow-up"></i>
                    </div>
                    
                </div>
            </div>-->
        </div>

        <!--[if lt IE 9]>
<script src="../assets/global/plugins/respond.min.js"></script>
<script src="../assets/global/plugins/excanvas.min.js"></script> 
<script src="../assets/global/plugins/ie8.fix.min.js"></script> 
<![endif]-->
        <!-- BEGIN CORE PLUGINS -->
        <script src="../assets/global/plugins/jquery.min.js" type="text/javascript"></script>
        <script src="../assets/global/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
        <script src="../assets/global/plugins/js.cookie.min.js" type="text/javascript"></script>
        <script src="../assets/global/plugins/jquery-slimscroll/jquery.slimscroll.min.js" type="text/javascript"></script>
        <script src="../assets/global/plugins/jquery.blockui.min.js" type="text/javascript"></script>
        <!-- END CORE PLUGINS -->
        <!-- BEGIN THEME GLOBAL SCRIPTS -->
        <script src="../assets/global/scripts/app.min.js" type="text/javascript"></script>
        <!-- END THEME GLOBAL SCRIPTS -->
        <!-- BEGIN PAGE LEVEL SCRIPTS -->
        <script src="../assets/global/plugins/jquery-validation/js/jquery.validate.min.js" type="text/javascript"></script>
        <script src="../assets/global/plugins/jquery-validation/js/additional-methods.min.js" type="text/javascript"></script>
        <!-- END PAGE LEVEL SCRIPTS -->
        <!-- BEGIN THEME LAYOUT SCRIPTS -->
        <script src="../assets/layouts/layout3/scripts/layout.min.js" type="text/javascript"></script>
        <script src="../assets/layouts/layout3/scripts/demo.min.js" type="text/javascript"></script>
        
        <script>
       		$(function(){
                var inviteMemberVisible = ${inviteMemberVisible};
       			if(inviteMemberVisible == true){
       				$("#showArticleFeild").find("button").show();
       				$("#inviteMemberButton").show();
       			}        			
       			else{
       				$("#showArticleFeild").find("button").hide();
       				$("#inviteMemberButton").hide();
       			}       			  			
       			
       			var deleteAdminVisible = ${deleteAdminVisible};
       			var deleteUserVisible = ${deleteUserVisible};
       			if(deleteAdminVisible){
       				$("#showUsers").find("a").show();
       				$("#showAdmins").find("a").show();
       			}
       			else{
       				if(deleteUserVisible){
       					$("#showUsers").find("a").show();
           				$("#showAdmins").find("a").hide();
       				}
       				else{
       					$("#showUsers").find("a").hide();
           				$("#showAdmins").find("a").hide();
       				}
       			}
       			$("#total_articles").append('<span>' + ${totalArticles} + '</span>');
        	});
       		
       		$("#inviteSubmit").click(function(){
       			var groupId = ${groupId};
       			var userId = $("#inviteUserId").val();
       			$.ajax({
       				url:"addUser",
       				type:"post",
       				data:{groupId:groupId,userId:userId},
       				success:function(){
       					alert("invite success!");
       				},
       				error: function(XMLHttpRequest, textStatus, errorThrown){                        	
                   	 	alert(XMLHttpRequest.status);
                   	    alert(XMLHttpRequest.readyState);
                   	 	alert(textStatus);
                   }
       			});       			
       		});
       		
       		$("#showArticleFeild").find("button").click(function(){
       			var articleId = $(this).attr("id");
       			var formId = $(this).parents("form:first").remove();
       			var groupId = ${groupId};
       			$.ajax({
       				url:"deleteArticle",
       				data:{articleId:articleId,groupId:groupId},
       				type:"post",
       				success:function(result){
       					$("#total_articles").children().remove();
       					$("#total_articles").append('<span>' + result + '</span>');
       					alert("delete success!");
       					//window.location.reload();
       				},
       				error: function(XMLHttpRequest, textStatus, errorThrown){                        	
               	 		alert(XMLHttpRequest.status);
               	    	alert(XMLHttpRequest.readyState);
               	 		alert(textStatus);
              	 	}
       			});
       		})
       		
       		
 			
        </script>
        <!--
        
        function upload(){
       			$("#uploadButton").submit();
       			var formData = new FormData($("#uploadfiles")[0]);
       			//var formData = $("#uploadfiles").serializeArray();
       			console.log(formData);
       			$.ajax({
       				type:"post",
       				url:"uploadBatchSubmit",
       				dataType:"json",
       				data:{formData:formData},
       				async:false,
       				contentType:false,
       				processData:false,
       				success:function(data){
       					alert("upload success!");
       				},
       				error: function(XMLHttpRequest, textStatus, errorThrown){                        	
                   	 	alert(XMLHttpRequest.status);
                   	    alert(XMLHttpRequest.readyState);
                   	 	alert(textStatus);
                   }
       			});
       		}  -->
        <!-- END THEME LAYOUT SCRIPTS -->
</body>

</html>